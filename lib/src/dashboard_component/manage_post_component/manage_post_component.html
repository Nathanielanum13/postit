<div class="col-4 py-2 mt-2 w-auto br-20 text-center"
     [class.alert-success]="postAlertCode==200"
     [class.alert-danger]="postAlertCode==500"
     *ngIf="postAlertBool" id="post_alert">
    <span class="fa fa-bell mx-3"></span>
    {{postAlert}}
    <span class="fa fa-times fa-sm mx-3 cursor-pointer"
          id="alert_close" (click)="dismissAlert()"></span>
</div>
<div class="row container mt-3 ml-0 mr-0">
    <div class="col-lg-4 col-md-12 col-sm-12">
        <div class="card shadow-c bg-transparent box-one br-20 border-0">
            <div class="card-body">
                <div class="text-center h6 text-default-one">Create Schedule</div>
                <form novalidate>
                    <div class="form-group">
                        <input type="text"
                               class="nt-form-control border-0 br-20"
                               placeholder="Schedule title" [(ngModel)]="title">
                    </div>
                    <!--<div class="form-group">
                        <material-date-range-picker class="simplified-example"
                                                    [(range)]="rangeSimplified"
                                                    [supportsComparison]="false"
                                                    [showNextPrevButtons]="false">
                        </material-date-range-picker>
                    </div>-->
                    <div class="form-group">
                        <input type="text" class="nt-form-control border-0 pr-5 br-20 datepicker alert-danger" placeholder="from" [(value)]="startDate" [class.alert-danger]="inputError">
                        <span class="fa fa-calendar float-right input-icon cursor-pointer text-default-two"></span>
                        <material-datepicker [(date)]="startDate"
                                             [minDate]="fromStart"
                                             [maxDate]="fromEnd"
                                             [required]="true"
                                             class="dt-picker">
                        </material-datepicker>
                    </div>
                    <div class="form-group">
                        <input type="text" class="nt-form-control border-0 pr-5 br-20" placeholder="to" [(value)]="finalDate" [class.alert-danger]="inputError">
                        <span class="fa fa-calendar float-right input-icon cursor-pointer text-default-two"></span>
                        <material-datepicker [(date)]="finalDate"
                                             [minDate]="startDate"
                                             [maxDate]="fromEnd"
                                             [required]="true"
                                             class="dt-picker">
                        </material-datepicker>
                    </div>
                </form>
            </div>
        </div>
        <div class="card shadow-c bg-transparent box-one br-20 border-0 py-3 mt-5 my-3">
            <div class="card bg-transparent br-20 border-0 mx-0" id="scheduled-posts">
                <div class="card-body">
                    <div class="text-center h6 text-default-one mb-3">Scheduled Posts</div>
                    <div *ngIf="scheduledPosts.isNotEmpty" class="px-3">
                        <div *ngFor="let scheduledPost of scheduledPosts; let $i = index" class="row py-1 bg-light br-20 mb-2">
                            <div class="col-9">
                                <span class="text-default-three d-post-text py-1">
                                    {{scheduledPost.title}}
                                </span>
                            </div>
                            <div class="col-3 my-auto text-right">
                                <span class="fa fa-trash px-1 br-20 cursor-pointer text-default-two" (click)="remove($i)" style="font-size: 12px !important;"></span>
                            </div>
                        </div>
                    </div>

                    <div class="mt-5 text-default-three text-center" *ngIf="scheduledPosts.isEmpty">
                        No schedule created
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-8 col-md-12 col-sm-12">
        <div class="card shadow-c border-0 bg-transparent box-one br-20">
            <div class="card-body">
                <form novalidate #filterForm="ngForm" (ngSubmit)="onSubmit()">
                    <div class="row c-bordered box-three sticky-top mx-2 br-20">
                        <div class="col-lg-4 col-sm-auto col-md-auto mx-auto">
                            <select name="filter" id="filter" class="nt-form-control border-0 br-20" [(ngModel)]="selectedFilter">
                                <option value="" disabled selected>Filter by:</option>
                                <option [value]="filter" *ngFor="let filter of filters">{{filter}}</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-sm-auto col-md-auto mx-auto">
                            <select name="number" id="number" class="nt-form-control border-0 br-20" [(ngModel)]="selectedNumber">
                                <option value="" disabled selected>Show first:</option>
                                <option [value]="number" *ngFor="let number of numbers">{{number}}</option>
                            </select>
                        </div>
                        <div class="col-lg-3 col-sm-auto col-md-auto mx-auto my-auto">
                            <button type="submit"
                                    class="btn btn-primary btn-sm br-20 px-3">Fetch</button>
                        </div>
                        <div class="col-lg-2 col-sm-auto col-md-auto mx-auto my-auto">
                            <span>{{postIds.length}}/{{filteredPosts.length}}</span>
                        </div>
                    </div>
                </form>
                <div class="row mt-2 mr-auto ml-auto" id="manage_box">
                    <div class="card border-0 box-one w-100 p-2 br-20" *ngIf="filteredPosts.isNotEmpty">
                        <div class="card-body">
                            <div class="row c-bordered box-three sticky-top">
                                <div class="col-2">
                                    <material-checkbox [(checked)]="allIsChecked" (click)="getAllIds()"></material-checkbox>
                                </div>
                                <div class="col-6 my-auto">
                                    <div class="text-default-three">Post message</div>
                                </div>
                                <div class="col-4 my-auto">
                                    <div class="text-default-three">Post tags</div>
                                </div>
                            </div>

                            <div class="row c-bordered box-two" *ngFor="let filteredPost of filteredPosts; let $i=index">
                                <div class="col-2">
                                    <material-checkbox class="my-0"
                                                       [(checked)]="filteredPost.checkedState" (click)="getId($i)">
                                    </material-checkbox>
                                </div>
                                <div class="d-post-text col-6">
                                    {{filteredPost.postMessage}}
                                </div>
                                <div class="col-4 d-post-text">
                                    <span class="tag" *ngFor="let tag of filteredPost.postTag">{{tag}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="filteredPosts.isEmpty && !loading">
                        <div class="nt-center text-default-three">
                            <span class="fa fa-cloud-moon-rain text-default-three mr-1"></span>
                            {{emptyMessage}}
                        </div>
                    </div>
                    <div *ngIf="filteredPosts.isEmpty && loading">
                        <div class="nt-center text-default-three">
                            <img src="img/load.gif" alt="Loading..." class="img-fluid">
                        </div>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-auto mx-auto">
                        <input type="text" class="nt-form-control border-0 br-20" disabled [value]="title" placeholder="Title">
                    </div>
                    <div class="col-auto mx-auto my-auto">
                        <button class="btn btn-primary btn-sm btn-block btn-lg br-20 px-3"
                                type="button"
                                [class.disabled]="title.isEmpty || postIds.isEmpty"
                                (click)="postSchedule()">Post Schedule</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
